import{l as R,b as f,A as H,w as W,o as q,N as J,m as s,p as a,q as e,z as u,I as h,v as b,O as Y,F as k,C as w,P as _,H as Q,J as X,y as A}from"./vendor-CuEoFATa.js";import F from"./vocabulary-mHgqsWr8.js";class v{constructor(){this.activeAudio=null}static getInstance(){return v.instance||(v.instance=new v),v.instance}play(n){return this.activeAudio&&(this.activeAudio.pause(),this.activeAudio=null),new Promise((m,x)=>{const g=new Audio(n);this.activeAudio=g,g.onended=()=>{this.activeAudio=null,m()},g.onerror=()=>{this.activeAudio=null,x(new Error("Audio playback failed"))},g.play().catch(x)})}stop(){this.activeAudio&&(this.activeAudio.pause(),this.activeAudio=null)}}const Z=v.getInstance(),G={class:"px-4 pt-6 2xl:px-0"},ee={key:0,class:"flex items-center justify-center h-64"},te={key:1,class:"border border-red-200 rounded-lg bg-red-50 p-4 shadow-sm dark:border-red-700 dark:bg-red-900 dark:bg-opacity-20 sm:p-6 mb-4"},re={class:"mt-2 text-sm text-red-700 dark:text-red-300"},oe={key:2,class:"border border-gray-200 rounded-lg bg-white p-4 shadow-sm dark:border-gray-700 dark:bg-gray-800 sm:p-6"},le={class:"items-center justify-between lg:flex"},se={class:"items-center sm:flex"},ae={class:"flex items-center"},ne=["value"],de={class:"ml-2 inline-flex cursor-pointer items-center"},ie={key:0,class:"ml-2 inline-flex cursor-pointer items-center"},ue={key:1,class:"ml-2 inline-flex cursor-pointer items-center"},ce={key:2,class:"ml-2 inline-flex cursor-pointer items-center"},fe={class:"mt-6 flex flex-col"},ge={class:"overflow-x-auto rounded-lg"},pe={class:"inline-block min-w-full align-middle"},be={class:"overflow-hidden shadow sm:rounded-lg"},xe={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-600"},ye={class:"bg-white dark:bg-gray-800"},he={class:"bg-hex-f3f3f3"},ke={colspan:"7",class:"px-4 py-6 text-sm font-normal text-gray-900 dark:bg-gray-500 dark:text-white"},ve={class:"flex flex-row"},me={class:"flex flex-1 items-center"},we={class:"text-lg"},_e={class:"justify-items-end"},$e={controls:"",class:"chapter"},Ce=["src"],Ee=["id"],Ae={class:"p-4"},Se=["onClick"],Ve=["onClick"],Le=["id","onFocusout","onFocusin"],Ie={class:"group relative whitespace-nowrap p-4"},Fe={key:0},Te=["title","href"],Me=["onClick"],je={style:{"font-style":"italic","font-family":"times"}},Ue={class:"p-4"},Be={class:"p-4"},Ne={class:"p-4"},Pe={class:"flex items-center justify-between pt-3 sm:pt-6"},ze={key:0},De={key:0,class:"flex-shrink-0"},T="vocabulary_chapter",He=R({__name:"index",setup(Ke){const n=f(!1),m=f(!0),x=f(!0),g=f(!1),S=f(!1),$=f(!1),y=f(!1),C=f(!1),E=f(""),V=f(""),M=Object.keys(F),c=f(localStorage.getItem(T)||M[0]),j=f(!1),p=H(F);W(c,r=>{localStorage.setItem(T,r)});function U(){let r=0,t=0,l=0;if(n.value){const d=p[c.value];for(const o of d.words)for(const i of o)i.spellValue?i.spellError?r++:l++:t++}return`${t} 个未完成，${l} 个正确，${r} 个错误`}function L(r){if(["ArrowLeft","ArrowRight"," "].includes(r.key)){if(r.preventDefault(),r.key===" ")return;({ArrowLeft:-5,ArrowRight:5})[r.key]}}q(()=>{y.value=!0;try{setTimeout(()=>{j.value=!0,y.value=!1},300),document.addEventListener("keydown",L)}catch(r){y.value=!1,C.value=!0,E.value="词汇数据加载失败，请稍后重试",console.error("Failed to load vocabulary data:",r)}}),J(()=>{document.removeEventListener("keydown",L)});function I(r){Z.play(r).catch(t=>{console.error("Failed to play audio:",t)})}function B(r){const t=`${r.word.join(" ")} ${r.pos} ${r.meaning}`;navigator.clipboard.writeText(t)}function N(r){r.stopPropagation();const t=r.target;if(r.key==="Enter"){const l=(Number(t.id)+1).toString();document.getElementById(l)?.focus()}}function P(r,t){x.value&&I(t)}function z(r,t){const d=r.target.value.toLowerCase().trim();d.length<1?(t.spellValue="",t.spellError=!1):(t.spellValue=d,t.spellError=!t.word.map(o=>o.toLowerCase().trim()).includes(d)),V.value=U()}function D(r){const t={error:"ml-4 bg-red-50 border border-red-500 text-red-900 placeholder-red-700 text-sm rounded-lg focus:ring-red-500 dark:bg-gray-700 focus:border-red-500 inline-block p-2.5 dark:text-red-500 dark:placeholder-red-500 dark:border-red-500",normal:"ml-4 inline-block border border-gray-300 rounded-lg bg-gray-50 p-2.5 text-sm text-gray-900 dark:border-gray-600 focus:border-blue-500 dark:bg-gray-700 dark:text-white focus:ring-blue-500 dark:focus:border-blue-500 dark:focus:ring-blue-500 dark:placeholder-gray-400",success:"ml-4 bg-green-50 border border-green-500 text-green-900 dark:text-green-400 placeholder-green-700 dark:placeholder-green-500 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 inline-block p-2.5 dark:bg-gray-700 dark:border-green-500"};if(S.value){if(r.spellError)return t.error;if(r.spellValue.length>0&&!r.spellError)return t.success}return t.normal}function K(){const r=p[c.value].words,t=[];for(const l of r)for(const d of l)d.spellError&&t.push(`${d.word.join(" ")} ${d.pos} ${d.meaning}`);navigator.clipboard.writeText(t.join(`

`))}function O(){C.value=!1,E.value="",y.value=!0,setTimeout(()=>{y.value=!1},500)}return(r,t)=>(a(),s("div",G,[y.value?(a(),s("div",ee,t[7]||(t[7]=[e("div",{class:"text-center"},[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500 mb-4"}),e("p",{class:"text-gray-600 dark:text-gray-400"}," 加载中... ")],-1)]))):C.value?(a(),s("div",te,[t[8]||(t[8]=e("div",{class:"flex items-center"},[e("svg",{class:"h-5 w-5 text-red-400 dark:text-red-300 mr-2",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})]),e("h3",{class:"text-lg font-medium text-red-800 dark:text-red-200"}," 加载失败 ")],-1)),e("div",re,[e("p",null,u(E.value),1)]),e("div",{class:"mt-4"},[e("button",{type:"button",class:"inline-flex items-center rounded-md border border-transparent bg-red-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 dark:bg-red-700 dark:hover:bg-red-600",onClick:O}," 重新加载 ")])])):(a(),s("div",oe,[e("div",le,[t[17]||(t[17]=e("div",{class:"mb-4 lg:mb-0"},[e("h3",{class:"mb-2 text-xl font-bold text-gray-900 dark:text-white"}," 雅思词汇真经 "),e("span",{class:"text-base font-normal text-gray-500 dark:text-gray-400"},"涵盖雅思必备核心词，逻辑词群记忆法")],-1)),e("div",se,[e("div",ae,[h(e("select",{"onUpdate:modelValue":t[0]||(t[0]=l=>c.value=l),class:"block w-full flex-1 border border-gray-300 rounded-lg bg-gray-50 p-2.5 text-sm text-gray-900 dark:border-gray-600 focus:border-blue-500 dark:bg-gray-700 dark:text-white focus:ring-blue-500 dark:focus:border-blue-500 dark:focus:ring-blue-500 dark:placeholder-gray-400"},[(a(!0),s(k,null,w(p,(l,d)=>(a(),s("option",{key:d,value:d},u(d),9,ne))),128))],512),[[Y,c.value]]),e("label",de,[h(e("input",{"onUpdate:modelValue":t[1]||(t[1]=l=>n.value=l),type:"checkbox",class:"peer sr-only"},null,512),[[_,n.value]]),t[9]||(t[9]=e("div",{class:"peer relative h-6 w-11 rounded-full bg-gray-200 after:absolute after:start-[2px] after:top-[2px] after:h-5 after:w-5 after:border after:border-gray-300 dark:border-gray-600 after:rounded-full after:bg-white dark:bg-gray-700 peer-checked:bg-blue-600 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 after:transition-all after:content-[''] peer-checked:after:translate-x-full peer-checked:after:border-white dark:peer-focus:ring-blue-800 rtl:peer-checked:after:-translate-x-full"},null,-1)),t[10]||(t[10]=e("span",{class:"ms-3 text-sm font-medium text-gray-900 dark:text-gray-300"},"练习模式",-1))]),n.value?(a(),s("label",ie,[h(e("input",{"onUpdate:modelValue":t[2]||(t[2]=l=>m.value=l),type:"checkbox",class:"peer sr-only"},null,512),[[_,m.value]]),t[11]||(t[11]=e("div",{class:"peer relative h-6 w-11 rounded-full bg-gray-200 after:absolute after:start-[2px] after:top-[2px] after:h-5 after:w-5 after:border after:border-gray-300 dark:border-gray-600 after:rounded-full after:bg-white dark:bg-gray-700 peer-checked:bg-blue-600 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 after:transition-all after:content-[''] peer-checked:after:translate-x-full peer-checked:after:border-white dark:peer-focus:ring-blue-800 rtl:peer-checked:after:-translate-x-full"},null,-1)),t[12]||(t[12]=e("span",{class:"ms-3 text-sm font-medium text-gray-900 dark:text-gray-300"},"释义",-1))])):b("",!0),n.value?(a(),s("label",ue,[h(e("input",{"onUpdate:modelValue":t[3]||(t[3]=l=>$.value=l),type:"checkbox",class:"peer sr-only"},null,512),[[_,$.value]]),t[13]||(t[13]=e("div",{class:"peer relative h-6 w-11 rounded-full bg-gray-200 after:absolute after:start-[2px] after:top-[2px] after:h-5 after:w-5 after:border after:border-gray-300 dark:border-gray-600 after:rounded-full after:bg-white dark:bg-gray-700 peer-checked:bg-blue-600 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 after:transition-all after:content-[''] peer-checked:after:translate-x-full peer-checked:after:border-white dark:peer-focus:ring-blue-800 rtl:peer-checked:after:-translate-x-full"},null,-1)),t[14]||(t[14]=e("span",{class:"ms-3 text-sm font-medium text-gray-900 dark:text-gray-300"},"原词",-1))])):b("",!0),n.value?(a(),s("label",ce,[h(e("input",{"onUpdate:modelValue":t[4]||(t[4]=l=>x.value=l),type:"checkbox",class:"peer sr-only"},null,512),[[_,x.value]]),t[15]||(t[15]=e("div",{class:"peer relative h-6 w-11 rounded-full bg-gray-200 after:absolute after:start-[2px] after:top-[2px] after:h-5 after:w-5 after:border after:border-gray-300 dark:border-gray-600 after:rounded-full after:bg-white dark:bg-gray-700 peer-checked:bg-blue-600 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 after:transition-all after:content-[''] peer-checked:after:translate-x-full peer-checked:after:border-white dark:peer-focus:ring-blue-800 rtl:peer-checked:after:-translate-x-full"},null,-1)),t[16]||(t[16]=e("span",{class:"ms-3 text-sm font-medium text-gray-900 dark:text-gray-300"},"自动播放",-1))])):b("",!0)])])]),e("div",fe,[e("div",ge,[e("div",pe,[e("div",be,[e("table",xe,[t[19]||(t[19]=e("thead",{class:"bg-gray-50 dark:bg-gray-700"},[e("tr",null,[e("th",{class:"p-4 text-left text-xs font-medium tracking-wider text-gray-500 dark:text-white"}," # "),e("th",{class:"p-4 text-xs font-medium tracking-wider text-gray-500 dark:text-white"},[e("br")]),e("th",{class:"p-4 text-left text-xs font-medium tracking-wider text-gray-500 dark:text-white"}," 词 "),e("th",{class:"w-0 text-left text-xs font-medium text-gray-500 dark:text-white"}," 词性 "),e("th",{class:"p-4 text-left text-xs font-medium tracking-wider text-gray-500 dark:text-white"}," 词义 "),e("th",{class:"p-4 text-left text-xs font-medium tracking-wider text-gray-500 dark:text-white"}," 例句 "),e("th",{class:"p-4 text-left text-xs font-medium tracking-wider text-gray-500 dark:text-white"}," 拓展 ")])],-1)),e("tbody",ye,[e("tr",he,[e("td",ke,[e("div",ve,[e("div",me,[e("span",we,u(c.value),1),Q(" （ "+u(p[c.value].groupCount)+" 组 "+u(p[c.value].wordCount)+" 个词 ） ",1)]),e("div",_e,[e("audio",$e,[e("source",{src:`vocabulary/audio/${p[c.value].audio}`,type:"audio/mpeg"},null,8,Ce)])])])])]),(a(!0),s(k,null,w(p[c.value].words,(l,d)=>(a(),s(k,{key:l[0]?.id},[(a(!0),s(k,null,w(l,o=>h((a(),s("tr",{id:`tr_${o.id}`,key:o.id,class:A([{"bg-gray-50 dark:bg-gray-700":o.id%2===0,[`group-color-${d%15}`]:!0},"text-sm text-gray-900 dark:text-white"])},[e("td",Ae,u(o.id),1),e("td",null,[e("i",{class:"i-ph-speaker-simple-high-bold inline-block cursor-pointer",onClick:i=>I(`vocabulary/audio/${c.value}/${o.word[0]}.mp3`)},null,8,Se),n.value?(a(),s(k,{key:0},[e("i",{class:A(`${o.showSource?"i-ph-eye-slash-bold":"i-ph-eye-bold"} inline-block cursor-pointer ml-4`),title:"显示原词",onClick:i=>o.showSource=!o.showSource},null,10,Ve),e("input",{id:`${o.id}`,autocomplete:"off",class:A(D(o)),type:"text",onFocusout:i=>z(i,o),onFocusin:i=>P(i,`vocabulary/audio/${c.value}/${o.word[0]}.mp3`),onKeydown:N},null,42,Le)],64)):b("",!0)]),e("td",Ie,[!n.value||o.showSource||n.value&&g.value&&o.spellError||$.value?(a(),s("div",Fe,[(a(!0),s(k,null,w(o.word,i=>(a(),s("p",{key:i},[e("a",{class:"hover:underline",title:`在剑桥词典中查询 ${i}`,target:"_blank",href:`https://dictionary.cambridge.org/dictionary/english-chinese-simplified/${i}`},u(i),9,Te)]))),128)),e("div",{class:"absolute right-0 top-0 hidden h-100% items-center group-hover:flex",onClick:i=>B(o)},t[18]||(t[18]=[e("i",{class:"i-ph-copy block cursor-pointer px-4"},null,-1)]),8,Me)])):b("",!0)]),e("td",je,u(o.pos),1),e("td",Ue,u(m.value?o.meaning:""),1),e("td",Be,u(n.value?"":o.example),1),e("td",Ne,u(n.value?"":o.extra),1)],10,Ee)),[[X,n.value&&(g.value?o.spellError:!0)||!n.value]])),128))],64))),128))])])])])])]),e("div",Pe,[e("div",null,[n.value?(a(),s("p",ze,u(V.value),1)):b("",!0)]),n.value?(a(),s("div",De,[e("button",{type:"button",class:"rounded-lg bg-blue-700 px-5 py-2.5 text-sm font-medium text-white dark:bg-blue-600 hover:bg-blue-800 focus:outline-none focus:ring-4 focus:ring-blue-300 dark:hover:bg-blue-700 dark:focus:ring-blue-800",onClick:t[5]||(t[5]=l=>S.value=!0)}," 完成练习 "),e("button",{type:"button",class:"ml-2 rounded-lg bg-blue-700 px-5 py-2.5 text-sm font-medium text-white dark:bg-blue-600 hover:bg-blue-800 focus:outline-none focus:ring-4 focus:ring-blue-300 dark:hover:bg-blue-700 dark:focus:ring-blue-800",onClick:t[6]||(t[6]=l=>g.value=!g.value)},u(g.value?"展示所有":"仅展示错词"),1),e("button",{type:"button",class:"ml-2 rounded-lg bg-blue-700 px-5 py-2.5 text-sm font-medium text-white dark:bg-blue-600 hover:bg-blue-800 focus:outline-none focus:ring-4 focus:ring-blue-300 dark:hover:bg-blue-700 dark:focus:ring-blue-800",onClick:K}," 拷贝错词 ")])):b("",!0)])]))]))}});export{He as default};
