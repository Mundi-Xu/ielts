import{d as P,r as f,f as R,w as W,g as H,h as Y,c as a,o as n,a as e,t as i,i as y,b as p,v as q,F as k,e as h,j as v,k as J,l as Q,n as T}from"./index-BE-JJ8Ir.js";import L from"./vocabulary-DcJRFp3m.js";const X={class:"px-4 pt-6 2xl:px-0"},Z={key:0,class:"flex items-center justify-center h-64"},G={key:1,class:"border border-red-200 rounded-lg bg-red-50 p-4 shadow-sm dark:border-red-700 dark:bg-red-900 dark:bg-opacity-20 sm:p-6 mb-4"},ee={class:"mt-2 text-sm text-red-700 dark:text-red-300"},te={key:2,class:"border border-gray-200 rounded-lg bg-white p-4 shadow-sm dark:border-gray-700 dark:bg-gray-800 sm:p-6"},re={class:"items-center justify-between lg:flex"},oe={class:"items-center sm:flex"},le={class:"flex items-center"},se=["value"],ae={class:"ml-2 inline-flex cursor-pointer items-center"},ne={key:0,class:"ml-2 inline-flex cursor-pointer items-center"},de={key:1,class:"ml-2 inline-flex cursor-pointer items-center"},ue={key:2,class:"ml-2 inline-flex cursor-pointer items-center"},ie={class:"mt-6 flex flex-col"},ce={class:"overflow-x-auto rounded-lg"},fe={class:"inline-block min-w-full align-middle"},ge={class:"overflow-hidden shadow sm:rounded-lg"},pe={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-600"},be={class:"bg-white dark:bg-gray-800"},xe={class:"bg-hex-f3f3f3"},ye={colspan:"7",class:"px-4 py-6 text-sm font-normal text-gray-900 dark:bg-gray-500 dark:text-white"},ke={class:"flex flex-row"},me={class:"flex flex-1 items-center"},he={class:"text-lg"},ve={class:"justify-items-end"},we={controls:"",class:"chapter"},_e=["src"],$e=["id"],Ee={class:"p-4"},Ce=["onClick"],Te=["onClick"],Se=["id","onFocusout","onFocusin"],Ve={class:"group relative whitespace-nowrap p-4"},Ae={key:0},Le=["title","href"],Fe=["onClick"],je={style:{"font-style":"italic","font-family":"times"}},Ie={class:"p-4"},Me={class:"p-4"},Be={class:"p-4"},Ne={class:"flex items-center justify-between pt-3 sm:pt-6"},Ue={key:0},ze={key:0,class:"flex-shrink-0"},F="vocabulary_chapter",Pe=P({__name:"index",setup(De){const d=f(!1),w=f(!0),_=f(!0),m=f(!1),S=f(!1),$=f(!1),b=f(!1),E=f(!1),C=f(""),V=f(""),j=Object.keys(L),c=f(localStorage.getItem(F)||j[0]),I=f(!1),g=R(L);W(c,r=>{localStorage.setItem(F,r)});function M(){let r=0,t=0,o=0;if(d.value){const s=g[c.value];for(const l of s.words)for(const u of l)u.spellValue?u.spellError?r++:o++:t++}return`${t} 个未完成，${o} 个正确，${r} 个错误`}H(()=>{b.value=!0;try{setTimeout(()=>{I.value=!0,b.value=!1},300);const r=document.getElementsByTagName("audio");for(const t of Array.from(r))t.onplay=()=>{for(const o of Array.from(r))o.blur(),t!==o&&o.pause()}}catch(r){b.value=!1,E.value=!0,C.value="词汇数据加载失败，请稍后重试",console.error("Failed to load vocabulary data:",r)}}),Y(()=>{const r=document.getElementsByTagName("audio");for(const t of Array.from(r))t.load()}),document.addEventListener("keydown",r=>{if(["ArrowLeft","ArrowRight"," "].includes(r.key)){r.preventDefault();const t=document.getElementsByTagName("audio"),o={ArrowLeft:-5,ArrowRight:5};for(const s of Array.from(t)){if(s.blur(),o[r.key]){const l=o[r.key];s.currentTime=s.currentTime+l}r.key===" "&&(s.paused?s.play():s.pause())}}});let x=null;function A(r){x&&(x.pause(),x.currentTime=0),x=document.createElement("audio"),x.src=r,x.play()}function B(r){const t=`${r.word.join(" ")} ${r.pos} ${r.meaning}`;navigator.clipboard.writeText(t)}function N(r){r.stopPropagation();const t=r.target;if(r.key==="Enter"){const o=(Number(t.id)+1).toString();document.getElementById(o)?.focus()}}function U(r,t){_.value&&A(t)}function z(r,t){const s=r.target.value.toLowerCase().trim();s.length<1?(t.spellValue="",t.spellError=!1):(t.spellValue=s,t.spellError=!t.word.map(l=>l.toLowerCase().trim()).includes(s)),V.value=M()}function D(r){const t={error:"ml-4 bg-red-50 border border-red-500 text-red-900 placeholder-red-700 text-sm rounded-lg focus:ring-red-500 dark:bg-gray-700 focus:border-red-500 inline-block p-2.5 dark:text-red-500 dark:placeholder-red-500 dark:border-red-500",normal:"ml-4 inline-block border border-gray-300 rounded-lg bg-gray-50 p-2.5 text-sm text-gray-900 dark:border-gray-600 focus:border-blue-500 dark:bg-gray-700 dark:text-white focus:ring-blue-500 dark:focus:border-blue-500 dark:focus:ring-blue-500 dark:placeholder-gray-400",success:"ml-4 bg-green-50 border border-green-500 text-green-900 dark:text-green-400 placeholder-green-700 dark:placeholder-green-500 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 inline-block p-2.5 dark:bg-gray-700 dark:border-green-500"};if(S.value){if(r.spellError)return t.error;if(r.spellValue.length>0&&!r.spellError)return t.success}return t.normal}function K(){const r=g[c.value].words,t=[];for(const o of r)for(const s of o)s.spellError&&t.push(`${s.word.join(" ")} ${s.pos} ${s.meaning}`);navigator.clipboard.writeText(t.join(`

`))}function O(){E.value=!1,C.value="",b.value=!0,setTimeout(()=>{b.value=!1},500)}return(r,t)=>(n(),a("div",X,[b.value?(n(),a("div",Z,t[7]||(t[7]=[e("div",{class:"text-center"},[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500 mb-4"}),e("p",{class:"text-gray-600 dark:text-gray-400"},"加载中...")],-1)]))):E.value?(n(),a("div",G,[t[8]||(t[8]=e("div",{class:"flex items-center"},[e("svg",{class:"h-5 w-5 text-red-400 dark:text-red-300 mr-2",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})]),e("h3",{class:"text-lg font-medium text-red-800 dark:text-red-200"},"加载失败")],-1)),e("div",ee,[e("p",null,i(C.value),1)]),e("div",{class:"mt-4"},[e("button",{type:"button",class:"inline-flex items-center rounded-md border border-transparent bg-red-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 dark:bg-red-700 dark:hover:bg-red-600",onClick:O}," 重新加载 ")])])):(n(),a("div",te,[e("div",re,[t[17]||(t[17]=e("div",{class:"mb-4 lg:mb-0"},[e("h3",{class:"mb-2 text-xl font-bold text-gray-900 dark:text-white"}," 雅思词汇真经 "),e("span",{class:"text-base font-normal text-gray-500 dark:text-gray-400"},"涵盖雅思必备核心词，逻辑词群记忆法")],-1)),e("div",oe,[e("div",le,[y(e("select",{"onUpdate:modelValue":t[0]||(t[0]=o=>c.value=o),class:"block w-full flex-1 border border-gray-300 rounded-lg bg-gray-50 p-2.5 text-sm text-gray-900 dark:border-gray-600 focus:border-blue-500 dark:bg-gray-700 dark:text-white focus:ring-blue-500 dark:focus:border-blue-500 dark:focus:ring-blue-500 dark:placeholder-gray-400"},[(n(!0),a(k,null,h(g,(o,s)=>(n(),a("option",{key:s,value:s},i(s),9,se))),128))],512),[[q,c.value]]),e("label",ae,[y(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>d.value=o),type:"checkbox",class:"peer sr-only"},null,512),[[v,d.value]]),t[9]||(t[9]=e("div",{class:"peer relative h-6 w-11 rounded-full bg-gray-200 after:absolute after:start-[2px] after:top-[2px] after:h-5 after:w-5 after:border after:border-gray-300 dark:border-gray-600 after:rounded-full after:bg-white dark:bg-gray-700 peer-checked:bg-blue-600 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 after:transition-all after:content-[''] peer-checked:after:translate-x-full peer-checked:after:border-white dark:peer-focus:ring-blue-800 rtl:peer-checked:after:-translate-x-full"},null,-1)),t[10]||(t[10]=e("span",{class:"ms-3 text-sm font-medium text-gray-900 dark:text-gray-300"},"练习模式",-1))]),d.value?(n(),a("label",ne,[y(e("input",{"onUpdate:modelValue":t[2]||(t[2]=o=>w.value=o),type:"checkbox",class:"peer sr-only"},null,512),[[v,w.value]]),t[11]||(t[11]=e("div",{class:"peer relative h-6 w-11 rounded-full bg-gray-200 after:absolute after:start-[2px] after:top-[2px] after:h-5 after:w-5 after:border after:border-gray-300 dark:border-gray-600 after:rounded-full after:bg-white dark:bg-gray-700 peer-checked:bg-blue-600 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 after:transition-all after:content-[''] peer-checked:after:translate-x-full peer-checked:after:border-white dark:peer-focus:ring-blue-800 rtl:peer-checked:after:-translate-x-full"},null,-1)),t[12]||(t[12]=e("span",{class:"ms-3 text-sm font-medium text-gray-900 dark:text-gray-300"},"释义",-1))])):p("",!0),d.value?(n(),a("label",de,[y(e("input",{"onUpdate:modelValue":t[3]||(t[3]=o=>$.value=o),type:"checkbox",class:"peer sr-only"},null,512),[[v,$.value]]),t[13]||(t[13]=e("div",{class:"peer relative h-6 w-11 rounded-full bg-gray-200 after:absolute after:start-[2px] after:top-[2px] after:h-5 after:w-5 after:border after:border-gray-300 dark:border-gray-600 after:rounded-full after:bg-white dark:bg-gray-700 peer-checked:bg-blue-600 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 after:transition-all after:content-[''] peer-checked:after:translate-x-full peer-checked:after:border-white dark:peer-focus:ring-blue-800 rtl:peer-checked:after:-translate-x-full"},null,-1)),t[14]||(t[14]=e("span",{class:"ms-3 text-sm font-medium text-gray-900 dark:text-gray-300"},"原词",-1))])):p("",!0),d.value?(n(),a("label",ue,[y(e("input",{"onUpdate:modelValue":t[4]||(t[4]=o=>_.value=o),type:"checkbox",class:"peer sr-only"},null,512),[[v,_.value]]),t[15]||(t[15]=e("div",{class:"peer relative h-6 w-11 rounded-full bg-gray-200 after:absolute after:start-[2px] after:top-[2px] after:h-5 after:w-5 after:border after:border-gray-300 dark:border-gray-600 after:rounded-full after:bg-white dark:bg-gray-700 peer-checked:bg-blue-600 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 after:transition-all after:content-[''] peer-checked:after:translate-x-full peer-checked:after:border-white dark:peer-focus:ring-blue-800 rtl:peer-checked:after:-translate-x-full"},null,-1)),t[16]||(t[16]=e("span",{class:"ms-3 text-sm font-medium text-gray-900 dark:text-gray-300"},"自动播放",-1))])):p("",!0)])])]),e("div",ie,[e("div",ce,[e("div",fe,[e("div",ge,[e("table",pe,[t[19]||(t[19]=e("thead",{class:"bg-gray-50 dark:bg-gray-700"},[e("tr",null,[e("th",{class:"p-4 text-left text-xs font-medium tracking-wider text-gray-500 dark:text-white"}," # "),e("th",{class:"p-4 text-xs font-medium tracking-wider text-gray-500 dark:text-white"},[e("br")]),e("th",{class:"p-4 text-left text-xs font-medium tracking-wider text-gray-500 dark:text-white"}," 词 "),e("th",{class:"w-0 text-left text-xs font-medium text-gray-500 dark:text-white"}," 词性 "),e("th",{class:"p-4 text-left text-xs font-medium tracking-wider text-gray-500 dark:text-white"}," 词义 "),e("th",{class:"p-4 text-left text-xs font-medium tracking-wider text-gray-500 dark:text-white"}," 例句 "),e("th",{class:"p-4 text-left text-xs font-medium tracking-wider text-gray-500 dark:text-white"}," 拓展 ")])],-1)),e("tbody",be,[e("tr",xe,[e("td",ye,[e("div",ke,[e("div",me,[e("span",he,i(c.value),1),J(" （ "+i(g[c.value].groupCount)+" 组 "+i(g[c.value].wordCount)+" 个词 ） ",1)]),e("div",ve,[e("audio",we,[e("source",{src:`vocabulary/audio/${g[c.value].audio}`,type:"audio/mpeg"},null,8,_e)])])])])]),(n(!0),a(k,null,h(g[c.value].words,(o,s)=>(n(),a(k,{key:o[0]?.id},[(n(!0),a(k,null,h(o,l=>y((n(),a("tr",{id:`tr_${l.id}`,key:l.id,class:T([{"bg-gray-50 dark:bg-gray-700":l.id%2===0,[`group-color-${s%15}`]:!0},"text-sm text-gray-900 dark:text-white"])},[e("td",Ee,i(l.id),1),e("td",null,[e("i",{class:"i-ph-speaker-simple-high-bold inline-block cursor-pointer",onClick:u=>A(`vocabulary/audio/${c.value}/${l.word[0]}.mp3`)},null,8,Ce),d.value?(n(),a(k,{key:0},[e("i",{class:T(`${l.showSource?"i-ph-eye-slash-bold":"i-ph-eye-bold"} inline-block cursor-pointer ml-4`),title:"显示原词",onClick:u=>l.showSource=!l.showSource},null,10,Te),e("input",{id:`${l.id}`,autocomplete:"off",class:T(D(l)),type:"text",onFocusout:u=>z(u,l),onFocusin:u=>U(u,`vocabulary/audio/${c.value}/${l.word[0]}.mp3`),onKeydown:N},null,42,Se)],64)):p("",!0)]),e("td",Ve,[!d.value||l.showSource||d.value&&m.value&&l.spellError||$.value?(n(),a("div",Ae,[(n(!0),a(k,null,h(l.word,u=>(n(),a("p",{key:u},[e("a",{class:"hover:underline",title:`在剑桥词典中查询 ${u}`,target:"_blank",href:`https://dictionary.cambridge.org/dictionary/english-chinese-simplified/${u}`},i(u),9,Le)]))),128)),e("div",{class:"absolute right-0 top-0 hidden h-100% items-center group-hover:flex",onClick:u=>B(l)},t[18]||(t[18]=[e("i",{class:"i-ph-copy block cursor-pointer px-4"},null,-1)]),8,Fe)])):p("",!0)]),e("td",je,i(l.pos),1),e("td",Ie,i(w.value?l.meaning:""),1),e("td",Me,i(d.value?"":l.example),1),e("td",Be,i(d.value?"":l.extra),1)],10,$e)),[[Q,d.value&&(m.value?l.spellError:!0)||!d.value]])),128))],64))),128))])])])])])]),e("div",Ne,[e("div",null,[d.value?(n(),a("p",Ue,i(V.value),1)):p("",!0)]),d.value?(n(),a("div",ze,[e("button",{type:"button",class:"rounded-lg bg-blue-700 px-5 py-2.5 text-sm font-medium text-white dark:bg-blue-600 hover:bg-blue-800 focus:outline-none focus:ring-4 focus:ring-blue-300 dark:hover:bg-blue-700 dark:focus:ring-blue-800",onClick:t[5]||(t[5]=o=>S.value=!0)}," 完成练习 "),e("button",{type:"button",class:"ml-2 rounded-lg bg-blue-700 px-5 py-2.5 text-sm font-medium text-white dark:bg-blue-600 hover:bg-blue-800 focus:outline-none focus:ring-4 focus:ring-blue-300 dark:hover:bg-blue-700 dark:focus:ring-blue-800",onClick:t[6]||(t[6]=o=>m.value=!m.value)},i(m.value?"展示所有":"仅展示错词"),1),e("button",{type:"button",class:"ml-2 rounded-lg bg-blue-700 px-5 py-2.5 text-sm font-medium text-white dark:bg-blue-600 hover:bg-blue-800 focus:outline-none focus:ring-4 focus:ring-blue-300 dark:hover:bg-blue-700 dark:focus:ring-blue-800",onClick:K}," 拷贝错词 ")])):p("",!0)])]))]))}});export{Pe as default};
